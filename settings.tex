\usepackage{cmap}
\usepackage[utf8]{inputenc}
\usepackage[T2A]{fontenc}
\usepackage[english,russian]{babel}
\usepackage[left=15mm, top=15mm, right=15mm, bottom=30mm, nohead, nofoot]{geometry}
\usepackage{amsmath,amsfonts,amssymb} % математический пакет

\usepackage{blindtext}  % рыба-текст
\usepackage{tikz} % позволяет отрисовывать графические элементы
\usepackage{nicefrac} % добавляет красивые косые дроби типа ½ (1/2)
\usepackage{cancel} % добавляет сокращения (можно диагонально зачёркивать переданное в \cancel{})
\usepackage{hyperref}  % добавляет гиперссылки

\usepackage{graphicx} % позволяет добавлять изображения
\usepackage{float} % добавляет возможность создавать плавающие блоки
\usepackage[skip=2pt]{caption} % расстояние между подписью и картинкой

% используется затем в бойлерплейте
% титульной страницы, чтобы достать
% логотип итмо рядом с бойлерплейтом
\usepackage{currfile}

% отключаем вот такие урод-
% ливые переносы строк
\usepackage[none]{hyphenat}
\hyphenpenalty=10000
\exhyphenpenalty=10000
\sloppy

% настраиваем верхний и нижний колонтитулы
\usepackage{fancybox,fancyhdr}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[L]{\worktype}
\fancyhead[R]{\textit{\workname}}
\fancyfoot[C]{\thepage}
\headsep=4mm
\footskip=13mm

% устанавливаем отступы для абзацев, расстояние между строк и между столбцами array
\setlength{\parindent}{0em}
\setlength{\parsep}{0em}
\setlength{\headheight}{12pt}
\setlength{\topmargin}{-38pt}
\setlength{\arraycolsep}{2pt}

% настраиваем стиль гиперссылок и метаданные документа
\definecolor{urlcolor}{HTML}{3454D1}
\definecolor{linkcolor}{HTML}{3454D1}
\hypersetup{
    pdfstartview=FitH,
    linkcolor=linkcolor,
    urlcolor=urlcolor,
    filecolor=urlcolor,
    colorlinks=true,
    pdftitle={\worktype},
    pdfauthor={\ifdefined\studentname \studentname \else Неизвестен \fi}
}

% настраиваем блоки кода
\usepackage{listings}
\definecolor{background}{rgb}{0.97,0.97,0.97}
\definecolor{comments}{rgb}{0,0.3,0}
\definecolor{keywords}{rgb}{0.09,0.61,0.95}
\definecolor{strings}{rgb}{0,0.6,0}
\definecolor{numbers}{rgb}{0.5,0.5,0.5}
\lstdefinestyle{codestyle}{
    backgroundcolor=\color{background},
    commentstyle=\color{comments},
    keywordstyle=\color{keywords},
    stringstyle=\color{strings},
    numberstyle=\tiny\color{numbers},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,
    breaklines=true,
    captionpos=b,
    inputencoding=utf8,
    keepspaces=true,
    numbers=left,
    numbersep=5pt,
    showspaces=false,
    showstringspaces=false,
    showtabs=false,
    tabsize=2,
    extendedchars=true,
    literate={а}{{\cyra}}1 {б}{{\cyrb}}1 {в}{{\cyrv}}1 {г}{{\cyrg}}1 {д}{{\cyrd}}1 {е}{{\cyre}}1 {ж}{{\cyrzh}}1 {з}{{\cyrz}}1 {и}{{\cyri}}1 {й}{{\cyrishrt}}1 {к}{{\cyrk}}1 {л}{{\cyrl}}1 {м}{{\cyrm}}1 {н}{{\cyrn}}1 {о}{{\cyro}}1 {п}{{\cyrp}}1 {р}{{\cyrr}}1 {с}{{\cyrs}}1 {т}{{\cyrt}}1 {у}{{\cyru}}1 {ф}{{\cyrf}}1 {х}{{\cyrh}}1 {ц}{{\cyrc}}1 {ч}{{\cyrch}}1 {ш}{{\cyrsh}}1 {щ}{{\cyrshch}}1 {ъ}{{\cyrhrdsn}}1 {ы}{{\cyrery}}1 {ь}{{\cyrsftsn}}1 {э}{{\cyrerev}}1 {ю}{{\cyryu}}1 {я}{{\cyrya}}1 {А}{{\CYRA}}1 {Б}{{\CYRB}}1 {В}{{\CYRV}}1 {Г}{{\CYRG}}1 {Д}{{\CYR96}}1 {Е}{{\CYRE}}1 {Ж}{{\CYRZH}}1 {З}{{\CYRZ}}1 {И}{{\CYRI}}1 {Й}{{\CYRISHRT}}1 {К}{{\CYRK}}1 {Л}{{\CYRL}}1 {М}{{\CYRM}}1 {Н}{{\CYRN}}1 {О}{{\CYRO}}1 {П}{{\CYRP}}1 {Р}{{\CYRR}}1 {С}{{\CYRS}}1 {Т}{{\CYRT}}1 {У}{{\CYRU}}1 {Ф}{{\CYRF}}1 {Х}{{\CYRH}}1 {Ц}{{\CYRC}}1 {Ч}{{\CYRCH}}1 {Ш}{{\CYRSH}}1 {Щ}{{\CYRSHCH}}1 {Ъ}{{\CYRHRDSN}}1 {Ы}{{\CYRERY}}1 {Ь}{{\CYRSFTSN}}1 {Э}{{\CYREREV}}1 {Ю}{{\CYRYU}}1 {Я}{{\CYRYA}}1 {ё}{{\cyryo}}1 {Ё}{{\CYRYO}}1
}
\lstset{style=codestyle}

% настраиваем стили для различных блоков текста
\addto\captionsrussian{
  \renewcommand{\contentsname}
    {\centering Содержание}
}
\newcommand{\addsection}[1]{
    \phantomsection
    \addcontentsline{toc}{section}{#1}
    \section*{\centering #1}
}
\newcommand{\addsubsection}[1]{
    \phantomsection
    \addcontentsline{toc}{subsection}{#1}
    \subsection*{\centering #1}
}
\newcommand{\addsubsubsection}[1]{
    \phantomsection
    \addcontentsline{toc}{subsubsection}{#1}
    \subsubsection*{\centering #1}
}

% определяем окружение quotebox, выделяющее текст отступом с вертикальной чертой слева
\usepackage{mdframed}
\newmdenv[
    leftmargin = 0.5em,
    skipabove = 0.5em,
    skipbelow = 0.5em,
    linewidth = 1pt,
    rightline = false,
    topline = false,
    bottomline = false
]{quotebox}



% определяем полезные команды
\newcommand*\squared[1]{\tikz[baseline=(char.base)]{  % окружает переданный аргументом текст в прямоугольник
            \node[shape=rectangle,draw,inner sep=4pt] (char) {#1};}}
\newcommand*\msquared[1]{\tikz[baseline=(char.base)]{  % окружает переданное аргументом выражение в прямоугольник
            \node[shape=rectangle,draw,inner sep=4pt] (char) {$\displaystyle #1$};}}
\newcommand\argmax[1]{\underset{#1}{\text{argmax}}}
\renewcommand\max[1]{\underset{#1}{\text{max}}}
\newcommand{\at}{\biggr\rvert}  % рисует большую вертикальную черту (указывает пределы вычисления после интегрирования)
\newcommand{\shifts}[3]{\kern#1#2\kern#3}  % сдвигает объект #2 слева на #1 и справа на #3
\newcommand{\e}{\;\text{e}}  % отображает экспоненту константой
\newcommand\NB{\textbf{N\kern-0.32em\textcolor{red}{B}}}  % отображает nota bene

\newlength{\tempheight}
\newcommand{\Let}{\mathbin{\text{\settoheight{\tempheight}{\mathstrut}\raisebox{0.4\pgflinewidth}{
    \tikz[baseline=0.5ex,line cap=round,line join=round] \draw (0,0) --++ (0.3em,0) --++ (0,2.3ex) --++ (-0.3em,0);
}}}}  % рисует значок «пусть»

\let\oldint\int          % декларирует новый интеграл, основанный на старом,
\def\int{\oldint\limits} % но с пределами над и под интегралом, а не справа от него
\DeclareRobustCommand{\divby}{
  \mathrel{\vbox{\baselineskip.65ex\lineskiplimit0pt\hbox{.}\hbox{.}\hbox{.}}}%
}

\newif\ifshowTOC
